{"version":3,"sources":["webpack://webpack_playground/webpack/runtime/chunk loaded","webpack://webpack_playground/./src/ts/class/base.ts","webpack://webpack_playground/./src/ts/class/camera.ts","webpack://webpack_playground/./src/ts/class/env.ts","webpack://webpack_playground/./src/ts/class/playground.ts","webpack://webpack_playground/./src/ts/class/renderer.ts","webpack://webpack_playground/./src/ts/dom/chat.ts","webpack://webpack_playground/./src/ts/dom/clock.ts","webpack://webpack_playground/./src/ts/dom/index.ts","webpack://webpack_playground/./src/ts/dom/music.ts","webpack://webpack_playground/./src/ts/dom/space-inavader.ts","webpack://webpack_playground/./src/ts/main.ts","webpack://webpack_playground/./src/ts/mesh/cube.ts","webpack://webpack_playground/./src/ts/mesh/dom-cube.ts","webpack://webpack_playground/./src/ts/mesh/index.ts","webpack://webpack_playground/./src/ts/resource/index.ts","webpack://webpack_playground/./src/ts/resource/textures.ts","webpack://webpack_playground/./src/ts/util/event-emitter.ts","webpack://webpack_playground/./src/ts/util/function.ts","webpack://webpack_playground/./src/ts/util/index.ts","webpack://webpack_playground/./src/ts/util/service.ts","webpack://webpack_playground/./src/ts/util/sizer.ts","webpack://webpack_playground/./src/ts/util/soundcloud-service.ts","webpack://webpack_playground/./src/ts/util/ticker.ts","webpack://webpack_playground/./src/ts/util/waveform.ts","webpack://webpack_playground/./src/ts/util/widget.ts","webpack://webpack_playground/webpack/bootstrap","webpack://webpack_playground/webpack/runtime/define property getters","webpack://webpack_playground/webpack/runtime/global","webpack://webpack_playground/webpack/runtime/hasOwnProperty shorthand","webpack://webpack_playground/webpack/runtime/make namespace object","webpack://webpack_playground/webpack/runtime/node module decorator","webpack://webpack_playground/webpack/runtime/jsonp chunk loading","webpack://webpack_playground/webpack/startup"],"names":["deferred","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","Object","defineProperty","exports","Base","renderer_1","require","camera_1","util_1","three_1","resource_1","playground_1","rotationLocked","loginStatus","canvas","domCanvas","domBundle","sizer","Sizer","scene","Scene","scene2","ticker","Ticker","camera","Camera","renderer","Renderer","playground","Playground","touched","touchedReactDelay","initResizeMechanic","initTickMechanic","initTouchMechanic","prototype","_this","on","resize","clock","delta","getDelta","update","timeout","startLocation","Vector2","endLocation","cbStart","x","clientX","clientY","cbEnd","delay","distanceTo","clearTimeout","setTimeout","addEventListener","setRotationLock","status","getRotationLockStatus","setLoginStatus","getLoginStatus","getResources","_a","_b","resources","OrbitControls_js_1","base","bestPoint","Vector3","minimunDrawbackAngle","Math","PI","setInstance","setControls","PerspectiveCamera","width","height","position","set","z","instance","add","controls","OrbitControls","enableDamping","enableZoom","enablePan","aspect","updateProjectionMatrix","Env","setLights","setAmbientLight","setDirectionalLight","setBackground","directionalLight","DirectionalLight","castShadow","shadow","mapSize","normalBias","ambientLight","AmbientLight","background","gradientCubeTexture","extendStatics","__extends","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","String","__","constructor","create","env_1","mesh_1","dom_cube_1","_super","ready","initTimeoutDuration","init","env","trigger","initTimeout","cube","Cube","domCube","DomCube","showChat","chat","showScreen","showMusic","EventEmitter","CSS3DRenderer_1","setInstances","WebGLRenderer","antialias","preserveDrawingBuffer","physicallyCorrectLights","toneMappingExposure","shadowMap","enabled","type","PCFSoftShadowMap","setClearColor","instance2","CSS3DRenderer","element","sizing","setSize","setPixelRatio","pixelRatio","render","Chat","function_1","offset","pos","normal","cNormal","cPos","m4","Matrix4","setElement","querySelector","chatMainInner","loginGuide","guestList","loginGuideBtn","object","CSS3DObject","scale","bindElementEvents","target","hideClass","classList","remove","filter","val","forEach","unchosen","refreshGuestList","list","containerEle","innerHTML","total","guest","index","item","concat","username","setGuestNumber","data","updateOcclude","Clock","rotation","initClock","updateClock","now","Date","sec","getSeconds","min","getMinutes","hou","getHours","mo","getMonth","dy","getDate","yr","getFullYear","tags","corr","pad","i","toString","timer","setInterval","bind","__createBinding","o","m","k","k2","undefined","enumerable","get","__exportStar","Music","widget_1","waveform_1","axios","defaultSource","playStatus","bindPlayerUIEvent","playButton","banner","title","artist","permaLink","waveform","waveformRect","getBoundingClientRect","widget","pause","play","waveformInstance","href","currentTarget","window","open","percent","playProgress","soundObject","picUrl","artwork_url","replace","src","publisher_metadata","permalink_url","url","waveform_url","res","samples","map","contrastOffset","Waveform","container","trackLength","reflection","waveWidth","interpolate","fadeOpacity","bindResize","EVENT_CLICK","porpotion","seek","duration","catch","err","load","SpaceInvader","cvs","dcvs","base_1","socket_io_client_1","lodash_1","service_1","Main","wrapper","document","chatBlock","rotationLock","curtainCall","chatBlockActive","path","initCurtainCall","initChatUI","initMusicUI","toggleRotationLockFromUI","setRotationLockFromUI","toggler","loginBtn","sendBtn","logoutBtn","pointerEvent","showTarget","myName","trim","socket","io","initChatSocket","emit","doAlert","sendMessage","doConfirm","evt","keyCode","stopRotationTimeOut","searchMusic","playViaIframe","checkIn","userCount","users","checkOut","showMessage","loginWrapper","inputEle","message","html","ele","createElementFromHTML","containerMain","containerCube","appendChild","cloneNode","parentElement","scrollTop","scrollHeight","gsap_1","setModel","createRoundedBoxGeo","depth","radius0","smoothness","shape","Shape","eps","radius","faceRadius","absarc","geometry","ExtrudeGeometry","bevelEnabled","bevelSegments","steps","bevelSize","bevelThickness","curveSegments","center","geo","mat","MeshMatcapMaterial","matcap","cubeMatcap","group","Group","mesh","Mesh","cubeLikeConfig","initialScale","initialRotation","doAnimation","default","to","startAnimationInnerRotationConfig","startAnimationInnerScalingConfig","onStart","onComplete","showChatAnimationInnerRotationConfig","angle","getTargetAngle","showMusicAnimationInnerRotationConfig","updateParameter","dom_1","space_inavader_1","clock_1","music_1","groupOuter","groupInner","music","spaceInvader","textures_1","textureLoader","TextureLoader","cubeTextureLoader","CubeTextureLoader","getTexture","source","rej","texture","name","content","getCubeTexture","paths","error","console","log","promiseArr","_i","textureSources_1","textureSources","textureSource","all","values","sourceObj","callbacks","_names","callback","warn","resolveNames","_name","resolveName","namespace","off","keys","_args","finalResult","args","nameArray","names","split","newName","parts","original","faceType","box","copy","applyMatrix3","normalMatrix","applyMatrix4","multiplyMatrices","matrixWorldInverse","matrixWorld","negate","dot","style","visibility","l","r","showChatAnimationOuterRotationConfig","htmlString","div","createElement","firstChild","remain","minor","major","soundcloud_service_1","isMobile","soundCloudService","SoundCloudService","clientId","renderSearchView","frame","keywordInput","keyword","searchResult","embedableTracks","htmlBundle","search","q","limit","collection","embeddable_by","album_title","id","join","template","cusRes","activeClass","prm","confirm","cb","preventDefault","closest","getAttribute","removeEventListener","chosenId","keydownCallback","activeElement","actionTarget","action","trackId","devicePixelRatio","initSizingMechanic","rect","config","params","client_id","urlParameters","entries","event_emitter_1","requestAnimationFrame","tick","EVENT_RESIZED","EVENT_HOVER","EVENT_READY","REFLECTION_ACTIVE","REFLECTION","GUTTER_SELECTED","GUTTER_ACTIVE","GUTTER","WAVE_SELECTED","WAVE_ACTIVE","WAVE","WAVE_FOCUS","DEFAULT_MIN_OPACITY","DEFAULT_MAX_OPACITY","options","outerColor","wavesCollection","gutterWidth","waveOffset","reflectionHeight","waveHeight","colors","active","clickPercent","selected","isPlaying","hasStartedPlaying","assign","spawnCanvas","clientWidth","clientHeight","parseInt","context","isNaN","Error","initialize","getContext","updateHeight","setColors","bindEventHandlers","cache","redraw","bindContainerResize","fireEvent","round","setColor","setGradient","color","colorObjs","gradient","createLinearGradient","addColorStop","getMouseClickPosition","left","right","top","bottom","arguments","onMouseDown","onMouseOver","onMouseOut","mousePosTrackTime","waveClicked","isPaused","getWaveClicked","getMousePosTrackTime","calcPercent","iContWidth","setPlaying","setPaused","perct","iActive","dNext","gutterX","j","len","ref","results","xPos","yPos","clear","fillStyle","fillRect","max","abs","clearRect","setData","getData","setDataInterpolated","interpolateArray","setDataCropped","expandArray","linearInterpolate","before","after","atPoint","defaultValue","newData","slice","fitCount","springFactor","tmp","floor","ceil","putDataIntoWaveBlock","fAbsValue","fWavePoint","iWaveBlock","iWaveCount","newDataBlocks","sum","SoundcloudWidget","iframeEle","SCWidget","events","PLAY","PLAY_PROGRESS","ev","progressPercent","relativePosition","PAUSE","SEEK","toggle","millisecond","seekTo","auto_play","getCurrentSound","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","loaded","__webpack_modules__","O","chunkIds","fn","priority","notFulfilled","Infinity","every","key","splice","definition","globalThis","Function","obj","prop","toStringTag","nmd","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"mappings":"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","file":"js/main.411bb996bb54891fd180.js","sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tresult = fn();\n\t\t}\n\t}\n\treturn result;\n};","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Base = void 0;\r\nvar renderer_1 = require(\"./renderer\");\r\nvar camera_1 = require(\"./camera\");\r\nvar util_1 = require(\"../util\");\r\nvar three_1 = require(\"three\");\r\nvar resource_1 = require(\"../resource\");\r\nvar playground_1 = require(\"./playground\");\r\nvar rotationLocked = false;\r\nvar loginStatus = false;\r\nvar Base = /** @class */ (function () {\r\n    function Base(canvas, domCanvas, domBundle) {\r\n        this.canvas = canvas;\r\n        this.domCanvas = domCanvas;\r\n        this.domBundle = domBundle;\r\n        this.sizer = new util_1.Sizer(this.canvas);\r\n        this.scene = new three_1.Scene();\r\n        this.scene2 = new three_1.Scene();\r\n        this.ticker = new util_1.Ticker();\r\n        this.camera = new camera_1.Camera(this);\r\n        this.renderer = new renderer_1.Renderer(this);\r\n        this.playground = new playground_1.Playground(this);\r\n        this.touched = false;\r\n        this.touchedReactDelay = 2000;\r\n        this.initResizeMechanic();\r\n        this.initTickMechanic();\r\n        this.initTouchMechanic();\r\n    }\r\n    Base.prototype.initResizeMechanic = function () {\r\n        var _this = this;\r\n        this.sizer.on('resize', function () {\r\n            _this.renderer.resize();\r\n            _this.camera.resize();\r\n        });\r\n    };\r\n    Base.prototype.initTickMechanic = function () {\r\n        var _this = this;\r\n        this.ticker.on('tick', function (clock) {\r\n            var delta = clock.getDelta();\r\n            _this.renderer.update();\r\n            _this.camera.update();\r\n            _this.playground.update(delta);\r\n        });\r\n    };\r\n    Base.prototype.initTouchMechanic = function () {\r\n        var _this = this;\r\n        var startLocation = new three_1.Vector2();\r\n        var endLocation = new three_1.Vector2();\r\n        var timeout;\r\n        var cbStart = function (e) {\r\n            startLocation.x = e.clientX;\r\n            startLocation.y = e.clientY;\r\n            _this.touched = true;\r\n        };\r\n        var cbEnd = function (e) {\r\n            endLocation.x = e.clientX;\r\n            endLocation.y = e.clientY;\r\n            var delay = startLocation.distanceTo(endLocation) > 5 ? _this.touchedReactDelay : 0;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(function () {\r\n                _this.touched = false;\r\n            }, delay);\r\n        };\r\n        this.domCanvas.addEventListener('mousedown', cbStart);\r\n        this.domCanvas.addEventListener('touchstart', cbStart);\r\n        this.domCanvas.addEventListener('mouseup', cbEnd);\r\n        this.domCanvas.addEventListener('touchend', cbEnd);\r\n        this.domCanvas.addEventListener('mouseleave', cbEnd);\r\n    };\r\n    Base.prototype.setRotationLock = function (status) {\r\n        rotationLocked = status;\r\n    };\r\n    Base.prototype.getRotationLockStatus = function () {\r\n        return rotationLocked;\r\n    };\r\n    Base.prototype.setLoginStatus = function (status) {\r\n        loginStatus = status;\r\n    };\r\n    Base.prototype.getLoginStatus = function () {\r\n        return loginStatus;\r\n    };\r\n    Base.prototype.getResources = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = this;\r\n                        return [4 /*yield*/, (0, resource_1.getResources)()];\r\n                    case 1:\r\n                        _a.resources = _b.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return Base;\r\n}());\r\nexports.Base = Base;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Camera = void 0;\r\nvar three_1 = require(\"three\");\r\nvar OrbitControls_js_1 = require(\"three/examples/jsm/controls/OrbitControls.js\");\r\nvar Camera = /** @class */ (function () {\r\n    function Camera(base) {\r\n        this.base = base;\r\n        this.bestPoint = new three_1.Vector3(-8, 1, 8);\r\n        this.minimunDrawbackAngle = Math.PI / 3;\r\n        this.sizer = this.base.sizer;\r\n        this.canvas = this.base.domCanvas;\r\n        this.scene = this.base.scene;\r\n        this.setInstance();\r\n        this.setControls();\r\n    }\r\n    Camera.prototype.setInstance = function () {\r\n        var camera = new three_1.PerspectiveCamera(35, this.sizer.width / this.sizer.height, 0.1, 100);\r\n        camera.position.set(this.bestPoint.x, this.bestPoint.y, this.bestPoint.z);\r\n        this.instance = camera;\r\n        this.scene.add(this.instance);\r\n        // //@ts-ignore\r\n        // window.cm = camera;\r\n    };\r\n    Camera.prototype.setControls = function () {\r\n        this.controls = new OrbitControls_js_1.OrbitControls(this.instance, this.canvas);\r\n        this.controls.enableDamping = true;\r\n        this.controls.enableZoom = false;\r\n        this.controls.enablePan = false;\r\n    };\r\n    Camera.prototype.resize = function () {\r\n        this.instance.aspect = this.sizer.width / this.sizer.height;\r\n        this.instance.updateProjectionMatrix();\r\n    };\r\n    Camera.prototype.update = function () {\r\n        this.controls.update();\r\n    };\r\n    return Camera;\r\n}());\r\nexports.Camera = Camera;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Env = void 0;\r\nvar three_1 = require(\"three\");\r\nvar Env = /** @class */ (function () {\r\n    function Env(base) {\r\n        this.base = base;\r\n        this.setLights();\r\n    }\r\n    Env.prototype.setLights = function () {\r\n        this.setAmbientLight();\r\n        this.setDirectionalLight();\r\n        this.setBackground();\r\n    };\r\n    Env.prototype.setDirectionalLight = function () {\r\n        this.directionalLight = new three_1.DirectionalLight(0xffffff, 1);\r\n        this.directionalLight.castShadow = true;\r\n        this.directionalLight.shadow.mapSize.set(2048, 2048);\r\n        this.directionalLight.shadow.normalBias = 0.05;\r\n        this.directionalLight.position.set(3.5, 2, -1.25);\r\n        this.base.scene.add(this.directionalLight);\r\n    };\r\n    Env.prototype.setAmbientLight = function () {\r\n        this.ambientLight = new three_1.AmbientLight(0xffffff, 1);\r\n        this.base.scene.add(this.ambientLight);\r\n    };\r\n    Env.prototype.setBackground = function () {\r\n        this.base.scene.background = this.base.resources.gradientCubeTexture;\r\n    };\r\n    Env.prototype.update = function (delta) {\r\n    };\r\n    return Env;\r\n}());\r\nexports.Env = Env;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Playground = void 0;\r\nvar env_1 = require(\"./env\");\r\nvar mesh_1 = require(\"../mesh\");\r\nvar dom_cube_1 = require(\"../mesh/dom-cube\");\r\nvar util_1 = require(\"../util\");\r\nvar Playground = /** @class */ (function (_super) {\r\n    __extends(Playground, _super);\r\n    function Playground(base) {\r\n        var _this = _super.call(this) || this;\r\n        _this.base = base;\r\n        _this.ready = false;\r\n        _this.initTimeoutDuration = 1000;\r\n        _this.init();\r\n        return _this;\r\n    }\r\n    Playground.prototype.init = function () {\r\n        var _this = this;\r\n        this.base.getResources().then(function () {\r\n            _this.env = new env_1.Env(_this.base);\r\n            _this.trigger('env-ready');\r\n            clearTimeout(_this.initTimeout);\r\n            _this.initTimeout = setTimeout(function () {\r\n                _this.cube = new mesh_1.Cube(_this.base);\r\n                _this.domCube = new dom_cube_1.DomCube(_this.base);\r\n                _this.ready = true;\r\n                _this.trigger('ready');\r\n            }, _this.initTimeoutDuration);\r\n        });\r\n    };\r\n    Playground.prototype.showChat = function () {\r\n        this.cube.showChat();\r\n        this.domCube.showChat();\r\n        if (this.base.getLoginStatus()) {\r\n            this.domCube.chat.showScreen('guestList');\r\n        }\r\n        else {\r\n            this.domCube.chat.showScreen('loginGuide');\r\n        }\r\n    };\r\n    Playground.prototype.showMusic = function () {\r\n        this.cube.showMusic();\r\n        this.domCube.showMusic();\r\n    };\r\n    Playground.prototype.update = function (delta) {\r\n        if (this.ready) {\r\n            this.env.update(delta);\r\n            this.cube.update(delta);\r\n            this.domCube.update(delta);\r\n        }\r\n    };\r\n    return Playground;\r\n}(util_1.EventEmitter));\r\nexports.Playground = Playground;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Renderer = void 0;\r\nvar three_1 = require(\"three\");\r\nvar CSS3DRenderer_1 = require(\"three/examples/jsm/renderers/CSS3DRenderer\");\r\nvar Renderer = /** @class */ (function () {\r\n    function Renderer(base) {\r\n        this.base = base;\r\n        this.sizer = this.base.sizer;\r\n        this.canvas = this.base.canvas;\r\n        this.domCanvas = this.base.domCanvas;\r\n        this.scene = this.base.scene;\r\n        this.scene2 = this.base.scene2;\r\n        this.camera = this.base.camera;\r\n        this.setInstances();\r\n    }\r\n    Renderer.prototype.setInstances = function () {\r\n        //instance\r\n        this.instance = new three_1.WebGLRenderer({\r\n            canvas: this.canvas,\r\n            antialias: true,\r\n            preserveDrawingBuffer: true\r\n        });\r\n        this.instance.physicallyCorrectLights = true;\r\n        this.instance.toneMappingExposure = 1.75;\r\n        this.instance.shadowMap.enabled = true;\r\n        this.instance.shadowMap.type = three_1.PCFSoftShadowMap;\r\n        this.instance.setClearColor(0xffffff);\r\n        //instance2\r\n        this.instance2 = new CSS3DRenderer_1.CSS3DRenderer({\r\n            element: this.domCanvas\r\n        });\r\n        this.sizing();\r\n    };\r\n    Renderer.prototype.resize = function () {\r\n        this.sizing();\r\n    };\r\n    Renderer.prototype.sizing = function () {\r\n        //instance\r\n        this.instance.setSize(this.sizer.width, this.sizer.height);\r\n        this.instance.setPixelRatio(this.sizer.pixelRatio);\r\n        //instance2\r\n        this.instance2.setSize(this.sizer.width, this.sizer.height);\r\n    };\r\n    Renderer.prototype.update = function () {\r\n        this.instance.render(this.scene, this.camera.instance);\r\n        this.instance2.render(this.scene2, this.camera.instance);\r\n    };\r\n    return Renderer;\r\n}());\r\nexports.Renderer = Renderer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Chat = void 0;\r\nvar three_1 = require(\"three\");\r\nvar CSS3DRenderer_1 = require(\"three/examples/jsm/renderers/CSS3DRenderer\");\r\nvar util_1 = require(\"../util\");\r\nvar function_1 = require(\"../util/function\");\r\nvar Chat = /** @class */ (function (_super) {\r\n    __extends(Chat, _super);\r\n    function Chat(base) {\r\n        var _this = _super.call(this) || this;\r\n        _this.base = base;\r\n        _this.offset = 1.7;\r\n        _this.pos = new three_1.Vector3(0, 0, _this.offset);\r\n        _this.normal = new three_1.Vector3(0, 0, 1);\r\n        _this.cNormal = new three_1.Vector3();\r\n        _this.cPos = new three_1.Vector3();\r\n        _this.m4 = new three_1.Matrix4();\r\n        _this.setElement();\r\n        return _this;\r\n    }\r\n    Chat.prototype.setElement = function () {\r\n        this.element = this.base.domBundle.querySelector('#chat-main-cube');\r\n        this.chatMainInner = this.element.querySelector('#chat-main-inner');\r\n        this.loginGuide = this.element.querySelector('#login-guide');\r\n        this.guestList = this.element.querySelector('#guest-list');\r\n        this.loginGuideBtn = this.element.querySelector('#login-guide-button');\r\n        this.object = new CSS3DRenderer_1.CSS3DObject(this.element);\r\n        this.object.position.set(0, 0, this.offset);\r\n        this.object.scale.set(1 / 160, 1 / 160, 1);\r\n        this.bindElementEvents();\r\n    };\r\n    Chat.prototype.showScreen = function (target) {\r\n        var _this = this;\r\n        var hideClass = 'chat-main__inner--hide';\r\n        var targets = ['chatMainInner', 'loginGuide', 'guestList'];\r\n        this[target].classList.remove(hideClass);\r\n        targets.filter(function (val) { return val !== target; }).forEach(function (unchosen) {\r\n            var _a;\r\n            (_a = _this[unchosen]) === null || _a === void 0 ? void 0 : _a.classList.add(hideClass);\r\n        });\r\n    };\r\n    Chat.prototype.refreshGuestList = function (list) {\r\n        var containerEle = this.guestList.querySelector('#guest-list-container');\r\n        containerEle.innerHTML = '';\r\n        var total = '';\r\n        var transitionGap = 200;\r\n        list.forEach(function (guest, index) {\r\n            var item = \"\\n           <li class=\\\"guest-list__li guest\\\" style=\\\"animation-delay:\".concat(transitionGap * index, \"ms\\\">\\n                <div class=\\\"guest__name\\\">\").concat(guest.username, \"</div>\\n            </li>\\n            \");\r\n            total += item;\r\n        });\r\n        containerEle.innerHTML = total;\r\n    };\r\n    Chat.prototype.bindElementEvents = function () {\r\n        var _this = this;\r\n        this.loginGuideBtn.addEventListener('pointerdown', function () {\r\n            _this.trigger('cube-login-button-click');\r\n        });\r\n    };\r\n    Chat.prototype.setGuestNumber = function (data) {\r\n        var containerEle = this.guestList.querySelector('#guest-number');\r\n        containerEle.innerHTML = \"NOW ONLINE: \".concat(data);\r\n    };\r\n    Chat.prototype.update = function () {\r\n        (0, function_1.updateOcclude)(this);\r\n    };\r\n    return Chat;\r\n}(util_1.EventEmitter));\r\nexports.Chat = Chat;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Clock = void 0;\r\nvar three_1 = require(\"three\");\r\nvar CSS3DRenderer_1 = require(\"three/examples/jsm/renderers/CSS3DRenderer\");\r\nvar function_1 = require(\"../util/function\");\r\nvar Clock = /** @class */ (function () {\r\n    function Clock(base) {\r\n        this.base = base;\r\n        this.offset = 1.7;\r\n        this.pos = new three_1.Vector3(-this.offset, 0, 0);\r\n        this.normal = new three_1.Vector3(-1, 0, 0);\r\n        this.cNormal = new three_1.Vector3();\r\n        this.cPos = new three_1.Vector3();\r\n        this.m4 = new three_1.Matrix4();\r\n        this.setElement();\r\n    }\r\n    Clock.prototype.setElement = function () {\r\n        this.element = this.base.domBundle.querySelector('#clock');\r\n        this.object = new CSS3DRenderer_1.CSS3DObject(this.element);\r\n        this.object.position.set(-this.offset, 0, 0);\r\n        this.object.rotation.y = -Math.PI / 2;\r\n        this.object.scale.set(1 / 160, 1 / 160, 1);\r\n        this.initClock();\r\n    };\r\n    Clock.prototype.updateClock = function () {\r\n        var now = new Date();\r\n        var sec = now.getSeconds(), min = now.getMinutes(), hou = now.getHours(), mo = now.getMonth(), dy = now.getDate(), yr = now.getFullYear();\r\n        var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n        var tags = [\"mon\", \"d\", \"y\", \"h\", \"m\", \"s\"], corr = [months[mo], dy, yr, (0, function_1.pad)(hou, 2), (0, function_1.pad)(min, 2), (0, function_1.pad)(sec, 2)];\r\n        for (var i = 0; i < tags.length; i++)\r\n            this.element.querySelector(\"#\".concat(tags[i])).innerHTML = corr[i].toString();\r\n    };\r\n    Clock.prototype.initClock = function () {\r\n        this.updateClock(); //\r\n        this.timer = setInterval(this.updateClock.bind(this), 1000);\r\n    };\r\n    Clock.prototype.update = function () {\r\n        (0, function_1.updateOcclude)(this);\r\n    };\r\n    return Clock;\r\n}());\r\nexports.Clock = Clock;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./chat\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Music = void 0;\r\nvar three_1 = require(\"three\");\r\nvar CSS3DRenderer_1 = require(\"three/examples/jsm/renderers/CSS3DRenderer\");\r\nvar function_1 = require(\"../util/function\");\r\nvar widget_1 = require(\"../util/widget\");\r\nvar waveform_1 = require(\"../util/waveform\");\r\nvar axios = require('axios');\r\nvar Music = /** @class */ (function () {\r\n    function Music(base) {\r\n        this.base = base;\r\n        this.offset = 1.7;\r\n        this.pos = new three_1.Vector3(this.offset, 0, 0);\r\n        this.normal = new three_1.Vector3(1, 0, 0);\r\n        this.cNormal = new three_1.Vector3();\r\n        this.cPos = new three_1.Vector3();\r\n        this.m4 = new three_1.Matrix4();\r\n        this.defaultSource = 'https%3A//api.soundcloud.com/tracks/327386009';\r\n        this.playStatus = false;\r\n        this.setElement();\r\n    }\r\n    Music.prototype.setElement = function () {\r\n        this.element = this.base.domBundle.querySelector('#music-player');\r\n        this.object = new CSS3DRenderer_1.CSS3DObject(this.element);\r\n        this.object.position.set(this.offset, 0, 0);\r\n        this.object.rotation.y = Math.PI / 2;\r\n        this.object.scale.set(1 / 160, 1 / 160, 1);\r\n        this.init();\r\n    };\r\n    Music.prototype.bindPlayerUIEvent = function () {\r\n        var _this = this;\r\n        var playButton = this.element.querySelector('#music-player-button');\r\n        var banner = this.element.querySelector('#music-player-img img');\r\n        var title = this.element.querySelector('#music-player-title span');\r\n        var artist = this.element.querySelector('#music-player-artist span');\r\n        var permaLink = this.element.querySelector('#music-player-perma-link');\r\n        var waveform = this.element.querySelector('#music-player-waveform');\r\n        var waveformRect = waveform.getBoundingClientRect();\r\n        var contrastFactor = 5;\r\n        var contrastOffset = 128;\r\n        playButton.addEventListener('pointerdown', function () {\r\n            if (!_this.playStatus) {\r\n                widget_1.widget.play();\r\n            }\r\n            else {\r\n                widget_1.widget.pause();\r\n            }\r\n            _this.playStatus = !_this.playStatus;\r\n        });\r\n        widget_1.widget.on('play', function () {\r\n            playButton.classList.add('music-player__btn--pause');\r\n            _this.playStatus = true;\r\n        });\r\n        widget_1.widget.on('pause', function () {\r\n            if (!_this.waveformInstance)\r\n                return;\r\n            playButton.classList.remove('music-player__btn--pause');\r\n            _this.playStatus = false;\r\n            _this.waveformInstance.pause();\r\n        });\r\n        permaLink.addEventListener('pointerdown', function (e) {\r\n            var href = e.currentTarget.href;\r\n            window.open(href, '_blank');\r\n        });\r\n        widget_1.widget.on('play-progress', function (percent) {\r\n            if (!_this.waveformInstance)\r\n                return;\r\n            _this.waveformInstance.playProgress(percent);\r\n        });\r\n        widget_1.widget.on('load', function (soundObject) {\r\n            var _a;\r\n            var picUrl = '';\r\n            if (!!soundObject.artwork_url) {\r\n                picUrl = soundObject.artwork_url.replace(/(.*)(-large)(\\.[a-z0-9]{3}[a-z0-9]?)$/, '$1-t500x500$3');\r\n            }\r\n            else {\r\n                picUrl = './assets/images/not-found.jpg';\r\n            }\r\n            //image\r\n            banner.src = picUrl;\r\n            //title\r\n            title.innerHTML = soundObject === null || soundObject === void 0 ? void 0 : soundObject.title;\r\n            //artist\r\n            artist.innerHTML = ((_a = soundObject === null || soundObject === void 0 ? void 0 : soundObject.publisher_metadata) === null || _a === void 0 ? void 0 : _a.artist) || 'Unknown';\r\n            //soundcloud link\r\n            permaLink.href = soundObject === null || soundObject === void 0 ? void 0 : soundObject.permalink_url;\r\n            //get waveform data and render waveform diagram\r\n            axios({\r\n                url: soundObject.waveform_url\r\n            })\r\n                .then(function (res) {\r\n                waveform.innerHTML = '';\r\n                // some contrast calculation \r\n                var data = res.data.samples.map(function (val) { return ((val - contrastOffset) / 100) * contrastFactor + contrastOffset / 100; });\r\n                _this.waveformInstance = new waveform_1.Waveform({\r\n                    container: waveform,\r\n                    data: data,\r\n                    width: waveformRect.width,\r\n                    height: waveformRect.height,\r\n                    trackLength: data.length,\r\n                    reflection: 0.3,\r\n                    waveWidth: 2,\r\n                    interpolate: true,\r\n                    fadeOpacity: 0.888,\r\n                    bindResize: false // to make the waveform bind to the resize event of the window!!\r\n                });\r\n                _this.waveformInstance.on(waveform_1.EVENT_CLICK, function (percent) {\r\n                    var porpotion = percent / 100;\r\n                    widget_1.widget.seek(porpotion * (soundObject === null || soundObject === void 0 ? void 0 : soundObject.duration));\r\n                    widget_1.widget.play();\r\n                    _this.waveformInstance.playProgress(percent);\r\n                });\r\n            })\r\n                .catch(function (err) { throw err; });\r\n        });\r\n    };\r\n    Music.prototype.init = function () {\r\n        this.bindPlayerUIEvent();\r\n        widget_1.widget.load(this.defaultSource);\r\n    };\r\n    Music.prototype.update = function () {\r\n        (0, function_1.updateOcclude)(this);\r\n    };\r\n    return Music;\r\n}());\r\nexports.Music = Music;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SpaceInvader = void 0;\r\nvar three_1 = require(\"three\");\r\nvar CSS3DRenderer_1 = require(\"three/examples/jsm/renderers/CSS3DRenderer\");\r\nvar function_1 = require(\"../util/function\");\r\nvar SpaceInvader = /** @class */ (function () {\r\n    function SpaceInvader(base) {\r\n        this.base = base;\r\n        this.offset = 1.7;\r\n        this.pos = new three_1.Vector3(0, 0, -this.offset);\r\n        this.normal = new three_1.Vector3(0, 0, -1);\r\n        this.cNormal = new three_1.Vector3();\r\n        this.cPos = new three_1.Vector3();\r\n        this.m4 = new three_1.Matrix4();\r\n        this.setElement();\r\n    }\r\n    SpaceInvader.prototype.setElement = function () {\r\n        this.element = this.base.domBundle.querySelector('#space-invader');\r\n        this.object = new CSS3DRenderer_1.CSS3DObject(this.element);\r\n        this.object.position.set(0, 0, -this.offset);\r\n        this.object.rotation.y = -Math.PI;\r\n        this.object.scale.set(1 / 160, 1 / 160, 1);\r\n    };\r\n    SpaceInvader.prototype.update = function () {\r\n        (0, function_1.updateOcclude)(this);\r\n    };\r\n    return SpaceInvader;\r\n}());\r\nexports.SpaceInvader = SpaceInvader;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar base_1 = require(\"./class/base\");\r\nvar socket_io_client_1 = require(\"socket.io-client\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar function_1 = require(\"./util/function\");\r\nvar service_1 = require(\"./util/service\");\r\nvar Main = /** @class */ (function (_super) {\r\n    __extends(Main, _super);\r\n    // private path = 'http://192.168.1.101:5500';\r\n    function Main(canvas, domCanvas, domBundle) {\r\n        var _this = _super.call(this, canvas, domCanvas, domBundle) || this;\r\n        _this.wrapper = document.querySelector('#wrapper');\r\n        _this.chatBlock = document.querySelector('#chat-block');\r\n        _this.rotationLock = _this.chatBlock.querySelector('#rotation-lock');\r\n        _this.curtainCall = document.querySelector('#curtain-call');\r\n        _this.chatBlockActive = false;\r\n        _this.path = 'https://3d-cube-chat.fly.dev';\r\n        _this.init();\r\n        return _this;\r\n    }\r\n    Main.prototype.init = function () {\r\n        this.initCurtainCall();\r\n        this.initChatUI();\r\n        this.initMusicUI();\r\n    };\r\n    Main.prototype.toggleRotationLockFromUI = function () {\r\n        var status = this.getRotationLockStatus();\r\n        if (status) {\r\n            this.rotationLock.classList.remove('chat-block__rotation-lock--active');\r\n        }\r\n        else {\r\n            this.rotationLock.classList.add('chat-block__rotation-lock--active');\r\n        }\r\n        this.setRotationLock(!status);\r\n    };\r\n    Main.prototype.setRotationLockFromUI = function (status) {\r\n        if (status) {\r\n            this.rotationLock.classList.add('chat-block__rotation-lock--active');\r\n        }\r\n        else {\r\n            this.rotationLock.classList.remove('chat-block__rotation-lock--active');\r\n        }\r\n        this.setRotationLock(status);\r\n    };\r\n    Main.prototype.initCurtainCall = function () {\r\n        var _this = this;\r\n        this.playground.on('env-ready', function () {\r\n            _this.curtainCall.classList.add('curtain-call--hide');\r\n        });\r\n    };\r\n    Main.prototype.initChatUI = function () {\r\n        var _this = this;\r\n        var toggler = this.chatBlock.querySelector('#chat-block-toggler');\r\n        var loginBtn = this.chatBlock.querySelector('#login-button');\r\n        var sendBtn = this.chatBlock.querySelector('#send-message-button');\r\n        var logoutBtn = this.chatBlock.querySelector('#logout-button');\r\n        var panelToggle = function () {\r\n            var showTarget;\r\n            if (_this.chatBlockActive) {\r\n                //\r\n                _this.wrapper.classList.remove('wrapper--active');\r\n                showTarget = _this.getLoginStatus() ? 'chatMainInner' : 'loginGuide';\r\n                _this.setRotationLockFromUI(false);\r\n            }\r\n            else {\r\n                //\r\n                _this.wrapper.classList.add('wrapper--active');\r\n                showTarget = _this.getLoginStatus() ? 'guestList' : 'loginGuide';\r\n                _this.setRotationLockFromUI(true);\r\n                _this.playground.showChat();\r\n            }\r\n            _this.playground.domCube.chat.showScreen(showTarget);\r\n            _this.chatBlockActive = !_this.chatBlockActive;\r\n        };\r\n        var panelSet = function (status) {\r\n            var showTarget;\r\n            if (status == true) {\r\n                //\r\n                _this.wrapper.classList.add('wrapper--active');\r\n                showTarget = _this.getLoginStatus() ? 'guestList' : 'loginGuide';\r\n                if (_this.getLoginStatus()) {\r\n                    _this.setRotationLockFromUI(true);\r\n                }\r\n                _this.playground.showChat();\r\n            }\r\n            else {\r\n                //\r\n                _this.wrapper.classList.remove('wrapper--active');\r\n                showTarget = _this.getLoginStatus() ? 'chatMainInner' : 'loginGuide';\r\n                _this.setRotationLockFromUI(false);\r\n            }\r\n            _this.playground.domCube.chat.showScreen(showTarget);\r\n            _this.chatBlockActive = status;\r\n        };\r\n        toggler.addEventListener(service_1.pointerEvent, panelToggle);\r\n        this.playground.on('ready', function () {\r\n            _this.playground.domCube.chat.showScreen('loginGuide');\r\n            _this.playground.domCube.chat.on('cube-login-button-click', function () {\r\n                _this.setRotationLockFromUI(true);\r\n                panelSet(true);\r\n            });\r\n        });\r\n        this.rotationLock.addEventListener(service_1.pointerEvent, this.toggleRotationLockFromUI.bind(this));\r\n        loginBtn.addEventListener(service_1.pointerEvent, function () {\r\n            _this.myName = (0, lodash_1.trim)(_this.chatBlock.querySelector('#login-name').value);\r\n            if (_this.myName) {\r\n                /**/\r\n                _this.socket = (0, socket_io_client_1.io)(_this.path);\r\n                _this.initChatSocket();\r\n                _this.socket.emit('login', { username: _this.myName });\r\n            }\r\n            else {\r\n                (0, service_1.doAlert)('Please enter a name :)');\r\n            }\r\n        });\r\n        sendBtn.addEventListener(service_1.pointerEvent, function () {\r\n            _this.sendMessage();\r\n        });\r\n        logoutBtn.addEventListener(service_1.pointerEvent, function () { return __awaiter(_this, void 0, void 0, function () {\r\n            var leave;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, (0, service_1.doConfirm)('Are you sure you want to leave the chat?')];\r\n                    case 1:\r\n                        leave = _a.sent();\r\n                        if (leave) {\r\n                            /* logout */\r\n                            this.socket.emit('logout', { username: this.myName });\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); });\r\n        document.addEventListener('keydown', function (evt) {\r\n            if (evt.keyCode == 13) {\r\n                _this.sendMessage();\r\n            }\r\n        });\r\n    };\r\n    Main.prototype.initMusicUI = function () {\r\n        var _this = this;\r\n        var musicBtn = this.chatBlock.querySelector('#search-music-button');\r\n        var stopRotationTimeOut;\r\n        musicBtn.addEventListener(service_1.pointerEvent, function () { return __awaiter(_this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.setRotationLockFromUI(true);\r\n                        this.playground.showMusic();\r\n                        return [4 /*yield*/, (0, service_1.searchMusic)().then(function (data) {\r\n                                if (data) {\r\n                                    (0, service_1.playViaIframe)(data).then(function () {\r\n                                        clearTimeout(stopRotationTimeOut);\r\n                                        stopRotationTimeOut = setTimeout(function () {\r\n                                            _this.setRotationLockFromUI(false);\r\n                                        }, 1000);\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    _this.setRotationLockFromUI(false);\r\n                                }\r\n                            })];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); });\r\n    };\r\n    Main.prototype.initChatSocket = function () {\r\n        var _this = this;\r\n        /**/\r\n        this.socket.on('loginSuccess', function (data) {\r\n            if (data.username === _this.myName) {\r\n                _this.checkIn(data);\r\n            }\r\n            else {\r\n                (0, service_1.doAlert)('Wrong username:( Please try again!');\r\n            }\r\n        });\r\n        /**/\r\n        this.socket.on('loginFail', function () {\r\n            (0, service_1.doAlert)('Duplicate name already exists :(');\r\n        });\r\n        /**/\r\n        this.socket.on('add', function (data) {\r\n            var html = \"<p>\".concat(data.username, \" \\u52A0\\u5165\\u804A\\u5929\\u5BA4</p>\");\r\n            // $('.chat-con').append(html);\r\n            _this.playground.domCube.chat.setGuestNumber(data.userCount);\r\n            _this.playground.domCube.chat.refreshGuestList(data === null || data === void 0 ? void 0 : data.users);\r\n        });\r\n        //\r\n        this.socket.on('leaveSuccess', function () {\r\n            _this.checkOut();\r\n        });\r\n        //\r\n        this.socket.on('leave', function (data) {\r\n            if (data.username != null) {\r\n                _this.playground.domCube.chat.refreshGuestList(data === null || data === void 0 ? void 0 : data.users);\r\n                var html = \"<p>\".concat(data.username, \" \\u9000\\u51FA\\u804A\\u5929\\u5BA4</p>\");\r\n                // $('.chat-con').append(html);\r\n                _this.playground.domCube.chat.setGuestNumber(data.userCount);\r\n            }\r\n        });\r\n        //\r\n        this.socket.on('receiveMessage', function (data) {\r\n            _this.showMessage(data);\r\n        });\r\n    };\r\n    Main.prototype.checkIn = function (data) {\r\n        var loginWrapper = this.chatBlock.querySelector('#login');\r\n        var userNameEle = this.chatBlock.querySelector('#my-name');\r\n        userNameEle.innerHTML = data.username;\r\n        loginWrapper.classList.add('login--logined');\r\n        this.setRotationLockFromUI(true);\r\n        this.setLoginStatus(true);\r\n        this.playground.showChat();\r\n    };\r\n    Main.prototype.checkOut = function () {\r\n        var loginWrapper = this.chatBlock.querySelector('#login');\r\n        loginWrapper.classList.remove('login--logined');\r\n        this.playground.domCube.chat.showScreen('loginGuide');\r\n        this.chatBlock.querySelector('#chat-main').innerHTML = '';\r\n        this.setLoginStatus(false);\r\n    };\r\n    Main.prototype.sendMessage = function () {\r\n        var inputEle = this.chatBlock.querySelector('#message-input');\r\n        var message = inputEle.value;\r\n        inputEle.value = '';\r\n        if (message) {\r\n            /* sendMessage */\r\n            this.socket.emit('sendMessage', { username: this.myName, message: message });\r\n        }\r\n    };\r\n    Main.prototype.showMessage = function (data) {\r\n        var html;\r\n        if (data.username === this.myName) {\r\n            html = \"<div class=\\\"chat-main__chat \\\">\\n                        <div class=\\\"chat-main__bubble-name\\\">You</div>\\n                        <div class=\\\"chat-main__bubble\\\">\".concat(data.message, \"</div>\\n                    </div>\\n                    \");\r\n        }\r\n        else {\r\n            html = \"<div class=\\\"chat-main__chat chat-main__chat--other\\\">\\n                        <div class=\\\"chat-main__bubble-name\\\">\".concat(data.username, \"</div>\\n                        <div class=\\\"chat-main__bubble\\\">\").concat(data.message, \"</div>\\n                    </div>\\n                    \");\r\n        }\r\n        var ele = (0, function_1.createElementFromHTML)(html);\r\n        var containerMain = this.chatBlock.querySelector('#chat-main');\r\n        var containerCube = this.wrapper.querySelector('#chat-main-cube .chat-main__inner#chat-main-inner');\r\n        containerMain.appendChild(ele);\r\n        containerCube.appendChild(ele.cloneNode(true));\r\n        containerMain.parentElement.scrollTop = containerMain.scrollHeight;\r\n        containerCube.scrollTop = containerCube.scrollHeight;\r\n    };\r\n    return Main;\r\n}(base_1.Base));\r\n(function () {\r\n    var cvs = document.querySelector('#canvas');\r\n    var dcvs = document.querySelector('#dom-canvas');\r\n    var domBundle = document.querySelector('#dom-bundle');\r\n    var instance = new Main(cvs, dcvs, domBundle);\r\n})();\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Cube = void 0;\r\nvar gsap_1 = require(\"gsap\");\r\nvar three_1 = require(\"three\");\r\nvar function_1 = require(\"../util/function\");\r\nvar Cube = /** @class */ (function () {\r\n    function Cube(base) {\r\n        this.base = base;\r\n        this.setModel();\r\n    }\r\n    Cube.prototype.createRoundedBoxGeo = function (width, height, depth, radius0, smoothness) {\r\n        var shape = new three_1.Shape();\r\n        var eps = 0.00001;\r\n        var radius = radius0 - eps;\r\n        var faceRadius = 0.25;\r\n        shape.absarc(eps, eps, faceRadius, -Math.PI / 2, -Math.PI, true);\r\n        shape.absarc(eps, height - radius * 2, faceRadius, Math.PI, Math.PI / 2, true);\r\n        shape.absarc(width - radius * 2, height - radius * 2, faceRadius, Math.PI / 2, 0, true);\r\n        shape.absarc(width - radius * 2, eps, faceRadius, 0, -Math.PI / 2, true);\r\n        var geometry = new three_1.ExtrudeGeometry(shape, {\r\n            depth: depth - radius0,\r\n            bevelEnabled: true,\r\n            bevelSegments: smoothness * 2,\r\n            steps: 1,\r\n            bevelSize: radius,\r\n            bevelThickness: radius0,\r\n            curveSegments: smoothness\r\n        });\r\n        geometry.center();\r\n        return geometry;\r\n    };\r\n    Cube.prototype.setModel = function () {\r\n        var _a, _b;\r\n        var geo = this.createRoundedBoxGeo(3, 3, 3, 0.4, 20);\r\n        var mat = new three_1.MeshMatcapMaterial({\r\n            matcap: this.base.resources.cubeMatcap\r\n        });\r\n        this.group = new three_1.Group();\r\n        this.mesh = new three_1.Mesh(geo, mat);\r\n        (_a = this.mesh.scale).set.apply(_a, function_1.cubeLikeConfig.initialScale);\r\n        (_b = this.mesh.rotation).set.apply(_b, function_1.cubeLikeConfig.initialRotation);\r\n        this.group.add(this.mesh);\r\n        this.base.scene.add(this.group);\r\n        this.doAnimation();\r\n    };\r\n    Cube.prototype.doAnimation = function () {\r\n        gsap_1.default.to(this.mesh.rotation, function_1.cubeLikeConfig.startAnimationInnerRotationConfig);\r\n        gsap_1.default.to(this.mesh.scale, function_1.cubeLikeConfig.startAnimationInnerScalingConfig);\r\n    };\r\n    Cube.prototype.showChat = function () {\r\n        var _this = this;\r\n        gsap_1.default.to(this.base.camera.instance.position, {\r\n            x: this.base.camera.bestPoint.x,\r\n            y: this.base.camera.bestPoint.y,\r\n            z: this.base.camera.bestPoint.z,\r\n            duration: 4,\r\n            onStart: function () {\r\n                _this.base.camera.controls.enabled = false;\r\n                _this.base.camera.controls.enableDamping = false;\r\n            },\r\n            onComplete: function () {\r\n                _this.base.camera.controls.enabled = true;\r\n                _this.base.camera.controls.enableDamping = true;\r\n            }\r\n        });\r\n        gsap_1.default.to(this.mesh.rotation, function_1.cubeLikeConfig.showChatAnimationInnerRotationConfig);\r\n        var angle = (0, function_1.getTargetAngle)(this.group.rotation.y);\r\n        gsap_1.default.to(this.group.rotation, {\r\n            x: 0,\r\n            y: angle,\r\n            z: 0,\r\n            duration: 2\r\n        });\r\n    };\r\n    Cube.prototype.showMusic = function () {\r\n        var _this = this;\r\n        gsap_1.default.to(this.base.camera.instance.position, {\r\n            x: this.base.camera.bestPoint.x,\r\n            y: this.base.camera.bestPoint.y,\r\n            z: this.base.camera.bestPoint.z,\r\n            duration: 4,\r\n            onStart: function () {\r\n                _this.base.camera.controls.enabled = false;\r\n                _this.base.camera.controls.enableDamping = false;\r\n            },\r\n            onComplete: function () {\r\n                _this.base.camera.controls.enabled = true;\r\n                _this.base.camera.controls.enableDamping = true;\r\n            }\r\n        });\r\n        gsap_1.default.to(this.mesh.rotation, function_1.cubeLikeConfig.showMusicAnimationInnerRotationConfig);\r\n        var angle = (0, function_1.getTargetAngle)(this.group.rotation.y);\r\n        gsap_1.default.to(this.group.rotation, {\r\n            x: 0,\r\n            y: angle - Math.PI / 4,\r\n            z: 0,\r\n            duration: 2\r\n        });\r\n    };\r\n    Cube.prototype.update = function (delta) {\r\n        if (!this.base.touched && !this.base.getRotationLockStatus()) {\r\n            this.group.rotation.y += delta / function_1.cubeLikeConfig.updateParameter;\r\n        }\r\n    };\r\n    return Cube;\r\n}());\r\nexports.Cube = Cube;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DomCube = void 0;\r\nvar three_1 = require(\"three\");\r\nvar dom_1 = require(\"../dom\");\r\nvar space_inavader_1 = require(\"../dom/space-inavader\");\r\nvar gsap_1 = require(\"gsap\");\r\nvar clock_1 = require(\"../dom/clock\");\r\nvar function_1 = require(\"../util/function\");\r\nvar music_1 = require(\"../dom/music\");\r\nvar DomCube = /** @class */ (function () {\r\n    function DomCube(base) {\r\n        this.base = base;\r\n        this.groupOuter = new three_1.Group();\r\n        this.groupInner = new three_1.Group();\r\n        this.init();\r\n    }\r\n    DomCube.prototype.init = function () {\r\n        var _a, _b;\r\n        this.chat = new dom_1.Chat(this.base);\r\n        this.clock = new clock_1.Clock(this.base);\r\n        this.music = new music_1.Music(this.base);\r\n        this.spaceInvader = new space_inavader_1.SpaceInvader(this.base);\r\n        (_a = this.groupInner.scale).set.apply(_a, function_1.cubeLikeConfig.initialScale);\r\n        (_b = this.groupInner.rotation).set.apply(_b, function_1.cubeLikeConfig.initialRotation);\r\n        this.groupInner.add(this.chat.object);\r\n        this.groupInner.add(this.clock.object);\r\n        this.groupInner.add(this.music.object);\r\n        this.groupInner.add(this.spaceInvader.object);\r\n        this.groupOuter.add(this.groupInner);\r\n        this.base.scene2.add(this.groupOuter);\r\n        this.doAnimation();\r\n    };\r\n    DomCube.prototype.doAnimation = function () {\r\n        gsap_1.default.to(this.groupInner.rotation, function_1.cubeLikeConfig.startAnimationInnerRotationConfig);\r\n        gsap_1.default.to(this.groupInner.scale, function_1.cubeLikeConfig.startAnimationInnerScalingConfig);\r\n    };\r\n    DomCube.prototype.showChat = function () {\r\n        gsap_1.default.to(this.groupInner.rotation, function_1.cubeLikeConfig.showChatAnimationInnerRotationConfig);\r\n        var angle = (0, function_1.getTargetAngle)(this.groupOuter.rotation.y);\r\n        gsap_1.default.to(this.groupOuter.rotation, {\r\n            x: 0,\r\n            y: angle,\r\n            z: 0,\r\n            duration: 2\r\n        });\r\n    };\r\n    DomCube.prototype.showMusic = function () {\r\n        gsap_1.default.to(this.groupInner.rotation, function_1.cubeLikeConfig.showMusicAnimationInnerRotationConfig);\r\n        var angle = (0, function_1.getTargetAngle)(this.groupOuter.rotation.y);\r\n        gsap_1.default.to(this.groupOuter.rotation, {\r\n            x: 0,\r\n            y: angle - Math.PI / 4,\r\n            z: 0,\r\n            duration: 2\r\n        });\r\n    };\r\n    DomCube.prototype.update = function (delta) {\r\n        if (!this.base.touched && !this.base.getRotationLockStatus()) {\r\n            this.groupOuter.rotation.y += delta / function_1.cubeLikeConfig.updateParameter;\r\n        }\r\n        this.chat.update();\r\n        this.clock.update();\r\n        this.music.update();\r\n        this.spaceInvader.update();\r\n    };\r\n    return DomCube;\r\n}());\r\nexports.DomCube = DomCube;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./cube\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getResources = void 0;\r\nvar textures_1 = require(\"./textures\");\r\nvar three_1 = require(\"three\");\r\nvar textureLoader = new three_1.TextureLoader();\r\nvar cubeTextureLoader = new three_1.CubeTextureLoader();\r\nvar getTexture = function (source) {\r\n    var prm = new Promise(function (res, rej) {\r\n        textureLoader.load(source.path, function (texture) {\r\n            res({\r\n                name: source.name,\r\n                content: texture\r\n            });\r\n        }, null, rej);\r\n    });\r\n    return prm;\r\n};\r\nvar getCubeTexture = function (source) {\r\n    var prm = new Promise(function (res, rej) {\r\n        cubeTextureLoader.load(source.paths, function (texture) {\r\n            res({\r\n                name: source.name,\r\n                content: texture\r\n            });\r\n        }, null, function (error) { console.log(error); });\r\n    });\r\n    return prm;\r\n};\r\nvar getResources = function () {\r\n    var promiseArr = [];\r\n    for (var _i = 0, textureSources_1 = textures_1.textureSources; _i < textureSources_1.length; _i++) {\r\n        var textureSource = textureSources_1[_i];\r\n        switch (textureSource.type) {\r\n            case 'cubeTexture':\r\n                promiseArr.push(getCubeTexture(textureSource));\r\n                break;\r\n            case 'texture':\r\n                promiseArr.push(getTexture(textureSource));\r\n                break;\r\n        }\r\n    }\r\n    return Promise.all(promiseArr).then(function (values) {\r\n        var result = {};\r\n        values.forEach(function (sourceObj) {\r\n            result[sourceObj.name] = sourceObj.content;\r\n        });\r\n        return result;\r\n    });\r\n};\r\nexports.getResources = getResources;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.textureSources = void 0;\r\nexports.textureSources = [\r\n    {\r\n        name: 'gradientCubeTexture',\r\n        type: 'cubeTexture',\r\n        paths: [\r\n            './assets/images/cubemap/gs-gradient/px.png',\r\n            './assets/images/cubemap/gs-gradient/nx.png',\r\n            './assets/images/cubemap/gs-gradient/py.png',\r\n            './assets/images/cubemap/gs-gradient/ny.png',\r\n            './assets/images/cubemap/gs-gradient/pz.png',\r\n            './assets/images/cubemap/gs-gradient/nz.png'\r\n        ]\r\n    },\r\n    {\r\n        name: 'cubeMatcap',\r\n        type: 'texture',\r\n        path: './assets/images/matcap/BlackRough.png'\r\n    }\r\n];\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventEmitter = void 0;\r\nvar EventEmitter = /** @class */ (function () {\r\n    function EventEmitter() {\r\n        this.callbacks = {};\r\n        this.callbacks = {};\r\n        this.callbacks.base = {};\r\n    }\r\n    EventEmitter.prototype.on = function (_names, callback) {\r\n        var _this = this;\r\n        // Errors\r\n        if (typeof _names === 'undefined' || _names === '') {\r\n            console.warn('wrong names');\r\n            return false;\r\n        }\r\n        if (typeof callback === 'undefined') {\r\n            console.warn('wrong callback');\r\n            return false;\r\n        }\r\n        // Resolve names\r\n        var names = this.resolveNames(_names);\r\n        // Each name\r\n        names.forEach(function (_name) {\r\n            // Resolve name\r\n            var name = _this.resolveName(_name);\r\n            // Create namespace if not exist\r\n            if (!(_this.callbacks[name.namespace] instanceof Object))\r\n                _this.callbacks[name.namespace] = {};\r\n            // Create callback if not exist\r\n            if (!(_this.callbacks[name.namespace][name.value] instanceof Array))\r\n                _this.callbacks[name.namespace][name.value] = [];\r\n            // Add callback\r\n            _this.callbacks[name.namespace][name.value].push(callback);\r\n        });\r\n        return this;\r\n    };\r\n    EventEmitter.prototype.off = function (_names) {\r\n        var _this = this;\r\n        // Errors\r\n        if (typeof _names === 'undefined' || _names === '') {\r\n            console.warn('wrong name');\r\n            return false;\r\n        }\r\n        // Resolve names\r\n        var names = this.resolveNames(_names);\r\n        // Each name\r\n        names.forEach(function (_name) {\r\n            // Resolve name\r\n            var name = _this.resolveName(_name);\r\n            // Remove namespace\r\n            if (name.namespace !== 'base' && name.value === '') {\r\n                delete _this.callbacks[name.namespace];\r\n            }\r\n            // Remove specific callback in namespace\r\n            else {\r\n                // Default\r\n                if (name.namespace === 'base') {\r\n                    // Try to remove from each namespace\r\n                    for (var namespace in _this.callbacks) {\r\n                        if (_this.callbacks[namespace] instanceof Object &&\r\n                            _this.callbacks[namespace][name.value] instanceof Array) {\r\n                            delete _this.callbacks[namespace][name.value];\r\n                            // Remove namespace if empty\r\n                            if (Object.keys(_this.callbacks[namespace]).length === 0)\r\n                                delete _this.callbacks[namespace];\r\n                        }\r\n                    }\r\n                }\r\n                // Specified namespace\r\n                else if (_this.callbacks[name.namespace] instanceof Object &&\r\n                    _this.callbacks[name.namespace][name.value] instanceof Array) {\r\n                    delete _this.callbacks[name.namespace][name.value];\r\n                    // Remove namespace if empty\r\n                    if (Object.keys(_this.callbacks[name.namespace]).length === 0)\r\n                        delete _this.callbacks[name.namespace];\r\n                }\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    EventEmitter.prototype.trigger = function (_name, _args) {\r\n        var _this = this;\r\n        // Errors\r\n        if (typeof _name === 'undefined' || _name === '') {\r\n            console.warn('wrong name');\r\n            return false;\r\n        }\r\n        var finalResult = null;\r\n        var result = null;\r\n        // Default args\r\n        var args = !(_args instanceof Array) ? [] : _args;\r\n        // Resolve names (should on have one event)\r\n        var nameArray = this.resolveNames(_name);\r\n        // Resolve name\r\n        var name = this.resolveName(nameArray[0]);\r\n        // Default namespace\r\n        if (name.namespace === 'base') {\r\n            // Try to find callback in each namespace\r\n            for (var namespace in this.callbacks) {\r\n                if (this.callbacks[namespace] instanceof Object &&\r\n                    this.callbacks[namespace][name.value] instanceof Array) {\r\n                    this.callbacks[namespace][name.value].forEach(function (callback) {\r\n                        result = callback.apply(_this, args);\r\n                        if (typeof finalResult === 'undefined') {\r\n                            finalResult = result;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        // Specified namespace\r\n        else if (this.callbacks[name.namespace] instanceof Object) {\r\n            if (name.value === '') {\r\n                console.warn('wrong name');\r\n                return this;\r\n            }\r\n            this.callbacks[name.namespace][name.value].forEach(function (callback) {\r\n                result = callback.apply(_this, args);\r\n                if (typeof finalResult === 'undefined')\r\n                    finalResult = result;\r\n            });\r\n        }\r\n        return finalResult;\r\n    };\r\n    EventEmitter.prototype.resolveNames = function (_names) {\r\n        var names = _names;\r\n        names = names.replace(/[^a-zA-Z0-9 ,/.]/g, '');\r\n        names = names.replace(/[,/]+/g, ' ');\r\n        names = names.split(' ');\r\n        return names;\r\n    };\r\n    EventEmitter.prototype.resolveName = function (name) {\r\n        var newName = {};\r\n        var parts = name.split('.');\r\n        newName.original = name;\r\n        newName.value = parts[0];\r\n        newName.namespace = 'base'; // Base namespace\r\n        // Specified namespace\r\n        if (parts.length > 1 && parts[1] !== '') {\r\n            newName.namespace = parts[1];\r\n        }\r\n        return newName;\r\n    };\r\n    return EventEmitter;\r\n}());\r\nexports.EventEmitter = EventEmitter;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getTargetAngle = exports.createElementFromHTML = exports.cubeLikeConfig = exports.pad = exports.updateOcclude = void 0;\r\nfunction updateOcclude(faceType) {\r\n    var box = faceType.base.playground.cube.mesh;\r\n    faceType.cNormal.copy(faceType.normal).applyMatrix3(box.normalMatrix);\r\n    faceType.cPos.copy(faceType.pos).applyMatrix4(faceType.m4.multiplyMatrices(faceType.base.camera.instance.matrixWorldInverse, box.matrixWorld));\r\n    var d = faceType.cPos.negate().dot(faceType.cNormal);\r\n    faceType.element.style.visibility = d < 0 ? \"hidden\" : \"visible\";\r\n}\r\nexports.updateOcclude = updateOcclude;\r\nfunction pad(n, l) {\r\n    for (var r = n.toString(); r.length < l; r = 0 + r)\r\n        ;\r\n    return r;\r\n}\r\nexports.pad = pad;\r\nexports.cubeLikeConfig = {\r\n    initialScale: [0, 0, 0],\r\n    initialRotation: [Math.PI / 3, -Math.PI / 3, Math.PI / 3],\r\n    startAnimationInnerRotationConfig: {\r\n        x: 0,\r\n        y: Math.PI / 4,\r\n        z: 0,\r\n        duration: 2\r\n    },\r\n    startAnimationInnerScalingConfig: {\r\n        x: 1,\r\n        y: 1,\r\n        z: 1,\r\n        duration: 2\r\n    },\r\n    showChatAnimationInnerRotationConfig: {\r\n        x: 0,\r\n        y: -Math.PI / 4,\r\n        z: 0,\r\n        duration: 2\r\n    },\r\n    showMusicAnimationInnerRotationConfig: {\r\n        x: 0,\r\n        y: -Math.PI / 4,\r\n        z: 0,\r\n        duration: 2\r\n    },\r\n    showChatAnimationOuterRotationConfig: {\r\n        x: 0,\r\n        y: 0,\r\n        z: 0,\r\n        duration: 2\r\n    },\r\n    updateParameter: 5\r\n};\r\nfunction createElementFromHTML(htmlString) {\r\n    var div = document.createElement('div');\r\n    div.innerHTML = htmlString.trim();\r\n    // Change this to div.childNodes to support multiple top-level nodes.\r\n    return div.firstChild;\r\n}\r\nexports.createElementFromHTML = createElementFromHTML;\r\nfunction getTargetAngle(angle) {\r\n    var remain = angle % (2 * Math.PI);\r\n    var minor = angle - remain - 0.25 * Math.PI;\r\n    var major = angle + ((7 * Math.PI / 4) - remain);\r\n    var newAngle = remain < Math.PI ? minor : major;\r\n    return newAngle;\r\n}\r\nexports.getTargetAngle = getTargetAngle;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./event-emitter\"), exports);\r\n__exportStar(require(\"./ticker\"), exports);\r\n__exportStar(require(\"./sizer\"), exports);\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.playViaIframe = exports.searchMusic = exports.doAlert = exports.doConfirm = exports.pointerEvent = void 0;\r\nvar widget_1 = require(\"../util/widget\");\r\nvar soundcloud_service_1 = require(\"./soundcloud-service\");\r\nvar isMobile = require('is-mobile');\r\nvar soundCloudService = new soundcloud_service_1.SoundCloudService({ clientId: '8m4K5d2x4mNmUHLhLmsGq9vxE3dDkxCm' });\r\nexports.pointerEvent = isMobile() ? 'touchstart' : 'click';\r\nfunction doConfirm(template) {\r\n    var frame = document.querySelector('#modal-confirm');\r\n    var activeClass = 'modal-prompt--active';\r\n    var cusRes;\r\n    var prm = new Promise(function (res) {\r\n        cusRes = res;\r\n    });\r\n    var confirm = false;\r\n    var cb = function (e) {\r\n        e.preventDefault();\r\n        switch (e.target.closest('[action]').getAttribute('action')) {\r\n            case 'yes':\r\n                confirm = true;\r\n                frame.classList.remove(activeClass);\r\n                break;\r\n            case 'no':\r\n                confirm = false;\r\n                frame.classList.remove(activeClass);\r\n                break;\r\n            case 'close':\r\n                frame.classList.remove(activeClass);\r\n                break;\r\n        }\r\n        e.currentTarget.removeEventListener(exports.pointerEvent, cb);\r\n        cusRes(confirm);\r\n    };\r\n    frame.querySelector('p').innerHTML = template;\r\n    //show frame;\r\n    frame.classList.add(activeClass);\r\n    frame.addEventListener(exports.pointerEvent, cb);\r\n    return prm;\r\n}\r\nexports.doConfirm = doConfirm;\r\nfunction doAlert(template) {\r\n    var frame = document.querySelector('#modal-alert');\r\n    var activeClass = 'modal-prompt--active';\r\n    var cb = function (e) {\r\n        e.preventDefault();\r\n        var action = e.target.closest('[action]').getAttribute('action');\r\n        if (action === 'close') {\r\n            e.currentTarget.removeEventListener(exports.pointerEvent, cb);\r\n            frame.classList.remove(activeClass);\r\n        }\r\n    };\r\n    frame.querySelector('p').innerHTML = template;\r\n    //show frame;\r\n    frame.classList.add(activeClass);\r\n    frame.addEventListener(exports.pointerEvent, cb);\r\n}\r\nexports.doAlert = doAlert;\r\nfunction renderSearchView(frame, keywordInput) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var container, keyword, searchResult, embedableTracks, htmlBundle;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!soundCloudService)\r\n                        return [2 /*return*/];\r\n                    container = frame.querySelector('#search-music-result');\r\n                    keyword = keywordInput.value;\r\n                    if (!keyword)\r\n                        return [2 /*return*/];\r\n                    container.innerHTML = \"\\n        <li class=\\\"modal-music-search__li modal-music-search__li--loading\\\">\\n           <img src=\\\"./assets/images/ripple.svg\\\">\\n        </li>\\n        \";\r\n                    return [4 /*yield*/, soundCloudService.search({\r\n                            q: keyword,\r\n                            limit: 100\r\n                        }).then(function (searchResult) {\r\n                            widget_1.widget.trigger('search', [searchResult]);\r\n                            return searchResult;\r\n                        })];\r\n                case 1:\r\n                    searchResult = _a.sent();\r\n                    embedableTracks = searchResult === null || searchResult === void 0 ? void 0 : searchResult.collection.filter(function (o) {\r\n                        return o.embeddable_by === 'all' && !!o.title;\r\n                    });\r\n                    htmlBundle = embedableTracks.map(function (o, index) {\r\n                        var _a, _b;\r\n                        return \"\\n            <li class=\\\"modal-music-search__li music-search-item\\\" style=\\\"animation-delay:\".concat(100 * index, \"ms\\\">\\n                <div class=\\\"music-search-item__inner\\\">\\n                    <div class=\\\"music-search-item__head\\\">\\n                        <div class=\\\"music-search-item__img\\\">\\n                            <img src=\\\"\").concat(o.artwork_url, \"\\\" onerror=\\\"this.parentNode.classList.add('music-search-item__img--not-found')\\\" >\\n                        </div>\\n                    </div>\\n                    <div class=\\\"music-search-item__body\\\">\\n                        <div class=\\\"music-search-item__title\\\">\\n                            <span>\").concat(o.title, \"</span>\\n                        </div>\\n                        <div class=\\\"music-search-item__descrp\\\">\\n                            <div class=\\\"music-search-item__artist\\\">\\n                            \").concat(((_a = o.publisher_metadata) === null || _a === void 0 ? void 0 : _a.artist) || 'Unknown', \"\\n                            </div>\\n                            <div class=\\\"music-search-item__album-title\\\">\").concat(((_b = o.publisher_metadata) === null || _b === void 0 ? void 0 : _b.album_title) || '', \"</div>\\n                        </div>\\n                    </div>\\n                    <button class=\\\"music-search-item__play\\\" action=\\\"choose\\\" data-id=\\\"\").concat(o.id, \"\\\">\\n                    </button>\\n                </div>\\n            </li>\\n            \");\r\n                    }).join('');\r\n                    container.scrollTop = 0;\r\n                    container.innerHTML = htmlBundle;\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction searchMusic() {\r\n    var _this = this;\r\n    var frame = document.querySelector('#modal-music-search');\r\n    var activeClass = 'modal-music-search--active';\r\n    var keywordInput = frame.querySelector('#music-search-input');\r\n    var cusRes;\r\n    var chosenId;\r\n    var prm = new Promise(function (res, rej) {\r\n        cusRes = res;\r\n    });\r\n    var keydownCallback = function (evt) {\r\n        if (evt.keyCode == 13) {\r\n            if (keywordInput.value && document.activeElement === keywordInput) {\r\n                renderSearchView(frame, keywordInput);\r\n            }\r\n        }\r\n    };\r\n    var cb = function (e) { return __awaiter(_this, void 0, void 0, function () {\r\n        var actionTarget, action;\r\n        return __generator(this, function (_a) {\r\n            actionTarget = e.target.closest('[action]') || e.target;\r\n            action = actionTarget.getAttribute('action');\r\n            if (action === 'close') {\r\n                e.currentTarget.removeEventListener(exports.pointerEvent, cb);\r\n                document.removeEventListener('keydown', keydownCallback);\r\n                frame.classList.remove(activeClass);\r\n                cusRes(false);\r\n            }\r\n            else if (action === 'search') {\r\n                renderSearchView(frame, keywordInput);\r\n            }\r\n            else if (action === 'choose') {\r\n                chosenId = actionTarget.getAttribute('data-id') || '';\r\n                e.currentTarget.removeEventListener(exports.pointerEvent, cb);\r\n                document.removeEventListener('keydown', keydownCallback);\r\n                frame.classList.remove(activeClass);\r\n                cusRes(chosenId);\r\n            }\r\n            return [2 /*return*/];\r\n        });\r\n    }); };\r\n    frame.classList.add(activeClass);\r\n    frame.addEventListener(exports.pointerEvent, cb);\r\n    document.addEventListener('keydown', keydownCallback);\r\n    return prm;\r\n}\r\nexports.searchMusic = searchMusic;\r\nfunction playViaIframe(trackId) {\r\n    var source = \"https%3A//api.soundcloud.com/tracks/\".concat(trackId);\r\n    return widget_1.widget.load(source).then(function () {\r\n        widget_1.widget.play();\r\n    });\r\n}\r\nexports.playViaIframe = playViaIframe;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Sizer = void 0;\r\nvar event_emitter_1 = require(\"./event-emitter\");\r\nvar Sizer = /** @class */ (function (_super) {\r\n    __extends(Sizer, _super);\r\n    function Sizer(canvas) {\r\n        var _this = _super.call(this) || this;\r\n        _this.canvas = canvas;\r\n        _this.pixelRatio = Math.min(window.devicePixelRatio, 2);\r\n        _this.initSizingMechanic();\r\n        return _this;\r\n    }\r\n    Sizer.prototype.initSizingMechanic = function () {\r\n        this.sizing();\r\n        window.addEventListener('resize', this.sizing.bind(this));\r\n    };\r\n    Sizer.prototype.sizing = function () {\r\n        var rect = this.canvas.parentElement.getBoundingClientRect();\r\n        this.width = rect.width;\r\n        this.height = rect.height;\r\n        this.trigger('resize', [this.width, this.height]);\r\n    };\r\n    return Sizer;\r\n}(event_emitter_1.EventEmitter));\r\nexports.Sizer = Sizer;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SoundCloudService = void 0;\r\nvar axios = require('axios');\r\nvar SoundCloudService = /** @class */ (function () {\r\n    function SoundCloudService(config) {\r\n        this.config = config;\r\n    }\r\n    SoundCloudService.prototype.search = function (params) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            var type = '/search/tracks';\r\n            var cors = \"https://cors-proxy-server.onrender.com/\";\r\n            params.client_id = params.client_id ? params.client_id : _this.config.clientId;\r\n            var urlParameters = Object.entries(params)\r\n                .map(function (e) { return e.join(\"=\"); })\r\n                .join(\"&\");\r\n            var url = \"\".concat(cors, \"https://api-v2.soundcloud.com\").concat(type, \"?\").concat(urlParameters);\r\n            axios({\r\n                url: url\r\n            })\r\n                .then(function (res) { return resolve(res.data); })\r\n                .catch(function (err) { return reject(err); });\r\n        });\r\n    };\r\n    return SoundCloudService;\r\n}());\r\nexports.SoundCloudService = SoundCloudService;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Ticker = void 0;\r\nvar event_emitter_1 = require(\"./event-emitter\");\r\nvar three_1 = require(\"three\");\r\nvar Ticker = /** @class */ (function (_super) {\r\n    __extends(Ticker, _super);\r\n    function Ticker() {\r\n        var _this = _super.call(this) || this;\r\n        _this.clock = new three_1.Clock();\r\n        window.requestAnimationFrame(function () {\r\n            _this.tick();\r\n        });\r\n        return _this;\r\n    }\r\n    Ticker.prototype.tick = function () {\r\n        var _this = this;\r\n        this.trigger('tick', [this.clock]);\r\n        window.requestAnimationFrame(function () {\r\n            _this.tick();\r\n        });\r\n    };\r\n    return Ticker;\r\n}(event_emitter_1.EventEmitter));\r\nexports.Ticker = Ticker;\r\n","\"use strict\";\r\n/*This is a modified version of https://github.com/samcrosoft/waveformjs, the original one is written in coffee script, and I rewrite it into typescript*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Waveform = exports.EVENT_RESIZED = exports.EVENT_HOVER = exports.EVENT_CLICK = exports.EVENT_READY = exports.REFLECTION_ACTIVE = exports.REFLECTION = exports.GUTTER_SELECTED = exports.GUTTER_ACTIVE = exports.GUTTER = exports.WAVE_SELECTED = exports.WAVE_ACTIVE = exports.WAVE = exports.WAVE_FOCUS = exports.DEFAULT_MIN_OPACITY = exports.DEFAULT_MAX_OPACITY = void 0;\r\nvar event_emitter_1 = require(\"./event-emitter\");\r\nexports.DEFAULT_MAX_OPACITY = 1;\r\nexports.DEFAULT_MIN_OPACITY = 0.2;\r\nexports.WAVE_FOCUS = 'waveFocus';\r\nexports.WAVE = 'wave';\r\nexports.WAVE_ACTIVE = 'waveActive';\r\nexports.WAVE_SELECTED = 'waveSelected';\r\nexports.GUTTER = 'gutter';\r\nexports.GUTTER_ACTIVE = 'gutterActive';\r\nexports.GUTTER_SELECTED = 'gutterSelected';\r\nexports.REFLECTION = 'reflection';\r\nexports.REFLECTION_ACTIVE = 'reflectionActive';\r\nexports.EVENT_READY = \"ready\";\r\nexports.EVENT_CLICK = \"click\";\r\nexports.EVENT_HOVER = \"hover\";\r\nexports.EVENT_RESIZED = \"hover\";\r\nvar Waveform = /** @class */ (function (_super) {\r\n    __extends(Waveform, _super);\r\n    function Waveform(options) {\r\n        var _this = _super.call(this) || this;\r\n        _this.DEFAULT_MAX_OPACITY = exports.DEFAULT_MAX_OPACITY;\r\n        _this.DEFAULT_MIN_OPACITY = exports.DEFAULT_MIN_OPACITY;\r\n        _this.WAVE_FOCUS = exports.WAVE_FOCUS;\r\n        _this.WAVE = exports.WAVE;\r\n        _this.WAVE_ACTIVE = exports.WAVE_ACTIVE;\r\n        _this.WAVE_SELECTED = exports.WAVE_SELECTED;\r\n        _this.GUTTER = exports.GUTTER;\r\n        _this.GUTTER_ACTIVE = exports.GUTTER_ACTIVE;\r\n        _this.GUTTER_SELECTED = exports.GUTTER_SELECTED;\r\n        _this.REFLECTION = exports.REFLECTION;\r\n        _this.REFLECTION_ACTIVE = exports.REFLECTION_ACTIVE;\r\n        _this.EVENT_READY = exports.EVENT_READY;\r\n        _this.EVENT_CLICK = exports.EVENT_CLICK;\r\n        _this.EVENT_HOVER = exports.EVENT_HOVER;\r\n        _this.EVENT_RESIZED = exports.EVENT_RESIZED;\r\n        _this.data = [];\r\n        _this.outerColor = 'transparent';\r\n        _this.reflection = 0;\r\n        _this.interpolate = true;\r\n        _this.bindResize = false;\r\n        _this.fadeOpacity = 0.5;\r\n        _this.wavesCollection = [];\r\n        _this.width = 0;\r\n        _this.height = 0;\r\n        _this.waveWidth = 2;\r\n        _this.gutterWidth = 1;\r\n        _this.waveOffset = 0;\r\n        _this.reflectionHeight = 0;\r\n        _this.waveHeight = 0;\r\n        _this.colors = {};\r\n        _this.active = -1;\r\n        _this.clickPercent = 0;\r\n        _this.selected = -1;\r\n        _this.isPlaying = false;\r\n        _this.hasStartedPlaying = false;\r\n        _this.trackLength = 0;\r\n        Object.assign(_this, options);\r\n        if (!_this.canvas) {\r\n            if (_this.container) {\r\n                _this.spawnCanvas(options.width || _this.container.clientWidth, options.height || _this.container.clientHeight);\r\n                _this.width = parseInt(_this.context.canvas.width.toString(), 10);\r\n                _this.height = parseInt(_this.context.canvas.height.toString(), 10);\r\n            }\r\n            else {\r\n                throw 'Either canvas or container option must be passed';\r\n            }\r\n        }\r\n        _this.fadeOpacity = _this.fadeOpacity || _this.DEFAULT_MAX_OPACITY;\r\n        if (isNaN(_this.fadeOpacity)) {\r\n            throw new Error('Fade Opacity Can Only Be A Number');\r\n        }\r\n        else if (_this.fadeOpacity < _this.DEFAULT_MIN_OPACITY || _this.fadeOpacity > _this.DEFAULT_MAX_OPACITY) {\r\n            throw new Error(\"Fade Opacity Can Only Be A Number Between \" + _this.DEFAULT_MIN_OPACITY + \" and \" + _this.DEFAULT_MAX_OPACITY);\r\n        }\r\n        _this.initialize();\r\n        return _this;\r\n    }\r\n    Waveform.prototype.spawnCanvas = function (width, height) {\r\n        this.canvas = document.createElement(\"canvas\");\r\n        this.container.appendChild(this.canvas);\r\n        this.canvas.width = width;\r\n        this.canvas.height = height;\r\n        this.context = this.canvas.getContext('2d');\r\n    };\r\n    ;\r\n    Waveform.prototype.initialize = function () {\r\n        this.updateHeight();\r\n        this.setColors();\r\n        this.bindEventHandlers();\r\n        this.cache();\r\n        this.redraw();\r\n        if (this.bindResize === true) {\r\n            this.bindContainerResize();\r\n        }\r\n        this.fireEvent(this.EVENT_READY);\r\n    };\r\n    ;\r\n    Waveform.prototype.updateHeight = function () {\r\n        this.waveOffset = Math.round(this.height - (this.height * this.reflection));\r\n        this.reflectionHeight = Math.round(this.height - this.waveOffset);\r\n        this.waveHeight = this.height - this.reflectionHeight;\r\n    };\r\n    ;\r\n    Waveform.prototype.setColors = function () {\r\n        this.setColor(this.WAVE_FOCUS, '#333333');\r\n        this.setGradient(this.WAVE, [{ color: '#666666', offset: 0 }, { color: '#868686', offset: 1 }]);\r\n        this.setGradient(this.WAVE_ACTIVE, [{ color: '#FF3300', offset: 0 }, { color: '#FF5100', offset: 1 }]);\r\n        this.setGradient(this.WAVE_SELECTED, [{ color: '#993016', offset: 0 }, { color: '#973C15', offset: 1 }]);\r\n        this.setGradient(this.GUTTER, [{ color: '#6B6B6B', offset: 0 }, { color: '#c9c9c9', offset: 1 }]);\r\n        this.setGradient(this.GUTTER_ACTIVE, [{ color: '#FF3704', offset: 0 }, { color: '#FF8F63', offset: 1 }]);\r\n        this.setGradient(this.GUTTER_SELECTED, [{ color: '#9A371E', offset: 0 }, { color: '#CE9E8A', offset: 1 }]);\r\n        this.setColor(this.REFLECTION, '#999999');\r\n        this.setColor(this.REFLECTION_ACTIVE, '#FFC0A0');\r\n    };\r\n    Waveform.prototype.setColor = function (name, color) {\r\n        this.colors[name] = color;\r\n    };\r\n    Waveform.prototype.setGradient = function (name, colorObjs) {\r\n        var gradient, i;\r\n        gradient = this.context.createLinearGradient(0, this.waveOffset, 0, 0);\r\n        i = 0;\r\n        while (i < colorObjs.length) {\r\n            gradient.addColorStop(colorObjs[i].offset, colorObjs[i].color);\r\n            i += 1;\r\n        }\r\n        this.colors[name] = gradient;\r\n    };\r\n    ;\r\n    Waveform.prototype.getMouseClickPosition = function (evt) {\r\n        var canvas, rect, x, y;\r\n        canvas = this.canvas;\r\n        rect = canvas.getBoundingClientRect();\r\n        x = Math.round((evt.clientX - rect.left) / (rect.right - rect.left) * canvas.width);\r\n        y = Math.round((evt.clientY - rect.top) / (rect.bottom - rect.top) * canvas.height);\r\n        return [x, y];\r\n    };\r\n    ;\r\n    Waveform.prototype.fireEvent = function (name) {\r\n        var data = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            data[_i - 1] = arguments[_i];\r\n        }\r\n        this.trigger(name, data);\r\n    };\r\n    ;\r\n    Waveform.prototype.bindEventHandlers = function () {\r\n        this.canvas.addEventListener('mousedown', this.onMouseDown.bind(this));\r\n        this.canvas.addEventListener('mousemove', this.onMouseOver.bind(this));\r\n        this.canvas.addEventListener('mouseout', this.onMouseOut.bind(this));\r\n    };\r\n    ;\r\n    Waveform.prototype.onMouseOut = function (e) {\r\n        this.selected = -1;\r\n        this.redraw();\r\n    };\r\n    ;\r\n    Waveform.prototype.onMouseOver = function (e) {\r\n        var aPos, //coordinate in [x,y] format\r\n        mousePosTrackTime, waveClicked, x;\r\n        if (this.hasStartedPlaying === true && this.isPaused() === true) {\r\n            return true;\r\n        }\r\n        aPos = this.getMouseClickPosition(e);\r\n        x = aPos[0];\r\n        waveClicked = this.getWaveClicked(x);\r\n        mousePosTrackTime = this.getMousePosTrackTime(x);\r\n        this.fireEvent(this.EVENT_HOVER, mousePosTrackTime, waveClicked);\r\n        this.selected = waveClicked;\r\n        this.redraw();\r\n    };\r\n    ;\r\n    Waveform.prototype.onMouseDown = function (e) {\r\n        var aPos, //coordinate in [x,y] format\r\n        x;\r\n        aPos = this.getMouseClickPosition(e);\r\n        x = aPos[0];\r\n        this.clickPercent = x / this.width;\r\n        this.fireEvent(this.EVENT_CLICK, this.clickPercent * 100);\r\n        this.active = this.calcPercent();\r\n        this.redraw();\r\n    };\r\n    ;\r\n    Waveform.prototype.bindContainerResize = function () {\r\n        var _this = this;\r\n        window.addEventListener(\"resize\", function () {\r\n            return function () {\r\n                var iContWidth;\r\n                iContWidth = _this.container.clientWidth;\r\n                _this.update({\r\n                    width: iContWidth\r\n                });\r\n                _this.redraw();\r\n                return _this.trigger(_this.EVENT_RESIZED, [iContWidth]);\r\n            };\r\n        });\r\n    };\r\n    ;\r\n    Waveform.prototype.setPlaying = function (val) {\r\n        if (val === void 0) { val = true; }\r\n        this.isPlaying = val;\r\n    };\r\n    ;\r\n    Waveform.prototype.setPaused = function () {\r\n        this.setPlaying(false);\r\n    };\r\n    ;\r\n    Waveform.prototype.isPaused = function () {\r\n        return this.active > 0 && this.isPlaying === false;\r\n    };\r\n    ;\r\n    Waveform.prototype.play = function (perct) {\r\n        this.playProgress(perct);\r\n    };\r\n    ;\r\n    Waveform.prototype.pause = function () {\r\n        this.setPaused();\r\n        console.log(\"is paused is \", this.isPaused());\r\n    };\r\n    ;\r\n    Waveform.prototype.playProgress = function (perct) {\r\n        var iActive;\r\n        if (this.hasStartedPlaying === null) {\r\n            this.hasStartedPlaying = true;\r\n        }\r\n        if (this.isPlaying === false) {\r\n            this.setPlaying(true);\r\n        }\r\n        iActive = Math.round((perct / 100) * this.wavesCollection.length);\r\n        this.active = iActive;\r\n        this.redraw();\r\n    };\r\n    ;\r\n    Waveform.prototype.calcPercent = function () {\r\n        return Math.round(this.clickPercent * this.width / (this.waveWidth + this.gutterWidth));\r\n    };\r\n    ;\r\n    Waveform.prototype.getWaveClicked = function (x) {\r\n        var fReturn, waveClicked;\r\n        waveClicked = Math.round(x / (this.waveWidth + this.gutterWidth));\r\n        fReturn = 0;\r\n        if (waveClicked > this.wavesCollection.length) {\r\n            fReturn = this.wavesCollection.length;\r\n        }\r\n        else if (waveClicked < 0) {\r\n            fReturn = 0;\r\n        }\r\n        else {\r\n            fReturn = waveClicked;\r\n        }\r\n        return fReturn;\r\n    };\r\n    ;\r\n    Waveform.prototype.getMousePosTrackTime = function (x) {\r\n        var fReturn, mousePosTrackTime;\r\n        mousePosTrackTime = this.trackLength / this.wavesCollection.length * this.getWaveClicked(x);\r\n        fReturn = 0;\r\n        if (mousePosTrackTime > this.trackLength) {\r\n            fReturn = this.trackLength;\r\n        }\r\n        else if (mousePosTrackTime < 0) {\r\n            fReturn = 0;\r\n        }\r\n        else {\r\n            fReturn = mousePosTrackTime;\r\n        }\r\n        return fReturn;\r\n    };\r\n    ;\r\n    Waveform.prototype.redraw = function () {\r\n        requestAnimationFrame(this.render.bind(this));\r\n    };\r\n    ;\r\n    Waveform.prototype.render = function () {\r\n        var d, dNext, gutterX, i, j, len, ref, reflectionHeight, results, t, xPos, yPos;\r\n        i = 0;\r\n        ref = this.wavesCollection;\r\n        t = this.width / this.data.length;\r\n        xPos = 0;\r\n        yPos = this.waveOffset;\r\n        this.clear();\r\n        j = 0;\r\n        len = ref.length;\r\n        results = [];\r\n        while (j < len) {\r\n            d = ref[j];\r\n            dNext = ref[j + 1];\r\n            /*\r\n            Draw the wave here\r\n             */\r\n            if (this.selected > 0 && (this.selected <= j && j < this.active) || (this.selected > j && j >= this.active)) {\r\n                this.context.fillStyle = this.colors[this.WAVE_SELECTED];\r\n            }\r\n            else if (this.active > j) {\r\n                this.context.fillStyle = this.colors[this.WAVE_ACTIVE];\r\n            }\r\n            else {\r\n                this.context.fillStyle = this.colors[this.WAVE_FOCUS];\r\n            }\r\n            this.context.fillRect(xPos, yPos, this.waveWidth, d);\r\n            /*\r\n            draw the gutter\r\n             */\r\n            if (this.selected > 0 && (this.selected <= j && j < this.active) || (this.selected > j && j >= this.active)) {\r\n                this.context.fillStyle = this.colors[this.GUTTER_SELECTED];\r\n            }\r\n            else if (this.active > j) {\r\n                this.context.fillStyle = this.colors[this.GUTTER_ACTIVE];\r\n            }\r\n            else {\r\n                this.context.fillStyle = this.colors[this.GUTTER];\r\n            }\r\n            gutterX = Math.max(d, dNext);\r\n            this.context.fillRect(xPos + this.waveWidth, yPos, this.gutterWidth, gutterX);\r\n            /*\r\n             draw the reflection\r\n             */\r\n            if (this.reflection > 0) {\r\n                reflectionHeight = Math.abs(d) / (1 - this.reflection) * this.reflection;\r\n                if (this.active > i) {\r\n                    this.context.fillStyle = this.colors[this.REFLECTION_ACTIVE];\r\n                }\r\n                else {\r\n                    this.context.fillStyle = this.colors[this.REFLECTION];\r\n                }\r\n                this.context.fillRect(xPos, yPos, this.waveWidth, reflectionHeight);\r\n            }\r\n            xPos += this.waveWidth + this.gutterWidth;\r\n            results.push(j++);\r\n        }\r\n        return results;\r\n    };\r\n    ;\r\n    Waveform.prototype.clear = function () {\r\n        this.context.fillStyle = this.outerColor;\r\n        this.context.clearRect(0, 0, this.width, this.height);\r\n        return this.context.fillRect(0, 0, this.width, this.height);\r\n    };\r\n    ;\r\n    /*\r\n     Data related codes\r\n     */\r\n    Waveform.prototype.setData = function (data) {\r\n        return this.data = data;\r\n    };\r\n    ;\r\n    Waveform.prototype.getData = function () {\r\n        return this.data;\r\n    };\r\n    ;\r\n    Waveform.prototype.setDataInterpolated = function (data) {\r\n        return this.setData(this.interpolateArray(data, this.width));\r\n    };\r\n    ;\r\n    Waveform.prototype.setDataCropped = function (data) {\r\n        return this.setData(this.expandArray(data, this.width));\r\n    };\r\n    ;\r\n    Waveform.prototype.linearInterpolate = function (before, after, atPoint) {\r\n        return before + (after - before) * atPoint;\r\n    };\r\n    ;\r\n    Waveform.prototype.expandArray = function (data, limit, defaultValue) {\r\n        if (defaultValue === void 0) { defaultValue = 0; }\r\n        var i, j, newData = [], ref;\r\n        if (defaultValue === null) {\r\n            defaultValue = 0;\r\n        }\r\n        if (data.length > limit) {\r\n            newData = data.slice(data.length - limit, data.length);\r\n        }\r\n        else {\r\n            i = j = 0;\r\n            ref = limit - 1;\r\n            while ((0 <= ref ? j <= ref : j >= ref)) {\r\n                newData[i] = data[i] || defaultValue;\r\n                i = (0 <= ref ? ++j : --j);\r\n            }\r\n        }\r\n        return newData;\r\n    };\r\n    ;\r\n    Waveform.prototype.interpolateArray = function (data, fitCount) {\r\n        var after, atPoint, before, i, newData = [], springFactor, tmp;\r\n        springFactor = (data.length - 1) / (fitCount - 1);\r\n        newData[0] = data[0];\r\n        i = 1;\r\n        while (i < fitCount - 1) {\r\n            tmp = i * springFactor;\r\n            before = Math.floor(tmp);\r\n            after = Math.ceil(tmp);\r\n            atPoint = tmp - before;\r\n            newData[i] = this.linearInterpolate(data[before], data[after], atPoint);\r\n            i++;\r\n        }\r\n        newData[fitCount - 1] = data[data.length - 1];\r\n        return newData;\r\n    };\r\n    ;\r\n    Waveform.prototype.putDataIntoWaveBlock = function () {\r\n        var data, fAbsValue, fAverage, fWavePoint, i, iWaveBlock, iWaveCount, j, key, newDataBlocks, sum;\r\n        iWaveBlock = this.waveWidth + this.gutterWidth;\r\n        data = this.getData();\r\n        newDataBlocks = [];\r\n        iWaveCount = Math.ceil(data.length / iWaveBlock);\r\n        i = 0;\r\n        while (i < iWaveCount) {\r\n            sum = 0;\r\n            j = 0;\r\n            while (j < iWaveBlock) {\r\n                key = (i * iWaveBlock) + j;\r\n                sum += data[key];\r\n                j++;\r\n            }\r\n            fAverage = sum / iWaveBlock;\r\n            fAbsValue = fAverage * this.waveHeight;\r\n            fWavePoint = Math.floor(-Math.abs(fAbsValue));\r\n            newDataBlocks.push(fWavePoint);\r\n            i++;\r\n        }\r\n        return newDataBlocks;\r\n    };\r\n    ;\r\n    Waveform.prototype.cache = function () {\r\n        if (this.interpolate === false) {\r\n            this.setDataCropped(this.data);\r\n        }\r\n        else {\r\n            this.setDataInterpolated(this.data);\r\n        }\r\n        this.wavesCollection = this.putDataIntoWaveBlock();\r\n    };\r\n    ;\r\n    /*\r\n      Data update details here\r\n     */\r\n    Waveform.prototype.update = function (options) {\r\n        if (options) {\r\n            if (options.gutterWidth) {\r\n                this.gutterWidth = options.gutterWidth;\r\n            }\r\n            if (options.waveWidth) {\r\n                this.waveWidth = options.waveWidth;\r\n            }\r\n            if (options.width) {\r\n                this.width = options.width;\r\n                this.canvas.width = this.width;\r\n            }\r\n            if (options.height) {\r\n                this.height = options.height;\r\n                this.canvas.height = this.height;\r\n            }\r\n            if (options.reflection === 0 || options.reflection) {\r\n                this.reflection = options.reflection;\r\n            }\r\n            if (options.interpolate) {\r\n                this.interpolate = options.interpolate;\r\n            }\r\n            /*\r\n              Re-calculate the wave block formations once one of the following is altered\r\n             */\r\n            if (options.gutterWidth || options.waveWidth || options.width || options.height || options.reflection || options.interpolate || options.reflection === 0) {\r\n                this.cache();\r\n            }\r\n            if (options.height || options.reflection || options.reflection === 0) {\r\n                this.updateHeight();\r\n            }\r\n        }\r\n        this.redraw();\r\n    };\r\n    ;\r\n    return Waveform;\r\n}(event_emitter_1.EventEmitter));\r\nexports.Waveform = Waveform;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.widget = void 0;\r\nvar util_1 = require(\"../util\");\r\nvar SoundcloudWidget = require('soundcloud-widget');\r\nvar iframeEle = document.querySelector('#soundcloud-iframe');\r\nvar SCWidget = /** @class */ (function (_super) {\r\n    __extends(SCWidget, _super);\r\n    function SCWidget(iframeEle) {\r\n        var _this = _super.call(this) || this;\r\n        _this.instance = new SoundcloudWidget(iframeEle);\r\n        _this.init();\r\n        return _this;\r\n    }\r\n    SCWidget.prototype.init = function () {\r\n        var _this = this;\r\n        this.instance.on(SoundcloudWidget.events.PLAY, function () {\r\n            _this.trigger('play');\r\n        });\r\n        this.instance.on(SoundcloudWidget.events.PLAY_PROGRESS, function (ev) {\r\n            var progressPercent = ev.relativePosition * 100;\r\n            _this.trigger('play-progress', [progressPercent]);\r\n        });\r\n        this.instance.on(SoundcloudWidget.events.PAUSE, function () {\r\n            _this.trigger('pause');\r\n        });\r\n        this.instance.on(SoundcloudWidget.events.SEEK, function (ev) {\r\n            _this.trigger('seek');\r\n        });\r\n    };\r\n    SCWidget.prototype.play = function () {\r\n        this.instance.play();\r\n    };\r\n    SCWidget.prototype.pause = function () {\r\n        this.instance.pause();\r\n    };\r\n    SCWidget.prototype.toggle = function () {\r\n        this.instance.toggle();\r\n    };\r\n    SCWidget.prototype.seek = function (millisecond) {\r\n        this.instance.seekTo(millisecond);\r\n    };\r\n    SCWidget.prototype.load = function (url) {\r\n        var _this = this;\r\n        return this.instance.load(url, { auto_play: false }).then(function () { return __awaiter(_this, void 0, void 0, function () {\r\n            var soundGetter;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        soundGetter = this.instance.getCurrentSound();\r\n                        return [4 /*yield*/, soundGetter.then(function (soundObject) {\r\n                                _this.trigger('load', [soundObject]);\r\n                            })];\r\n                    case 1:\r\n                        _a.sent();\r\n                        console.log('sound loaded');\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); });\r\n    };\r\n    return SCWidget;\r\n}(util_1.EventEmitter));\r\nexports.widget = new SCWidget(iframeEle);\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) var result = runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkwebpack_playground\"] = self[\"webpackChunkwebpack_playground\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\n__webpack_require__.O(undefined, [736], () => (__webpack_require__(7310)))\n__webpack_require__.O(undefined, [736], () => (__webpack_require__(2367)))\n__webpack_require__.O(undefined, [736], () => (__webpack_require__(142)))\nvar __webpack_exports__ = __webpack_require__.O(undefined, [736], () => (__webpack_require__(1163)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}